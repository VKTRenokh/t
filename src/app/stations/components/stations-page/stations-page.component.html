<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  [tuiNumberFormat]="numberFormat"
>
  @defer {
    <tra-map
      formControlName="latLng"
      [stations]="stations()"
    />
  }
  <tui-input formControlName="city">
    City name
    <input
      type="text"
      tuiTextfieldLegacy
      formControlName="city"
    />
  </tui-input>
  <tui-error
    [error]="[] | tuiFieldError | async"
    formControlName="city"
  />
  <tui-input-number formControlName="lat" />
  <tui-input-number formControlName="lng" />
  <form formGroupName="relations">
    @for (
      control of relations.controls;
      let i = $index;
      track i
    ) {
      <tui-input [formControlName]="i">
        Connection {{ i + 1 }}
        <input
          type="text"
          tuiTextfieldLegacy
          [formControlName]="i"
        />
      </tui-input>
    }
  </form>
  <button tuiButton type="submit" [disabled]="form.invalid">
    Save
  </button>
</form>
<tra-stations-list />
